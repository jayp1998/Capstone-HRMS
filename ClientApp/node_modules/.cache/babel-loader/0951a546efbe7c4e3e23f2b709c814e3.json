{"ast":null,"code":"/**\n * Ray Tools\n * Copyright (c) 2016-2021 TAG Digital Studios\n * Created : 2016-Feb-18\n * Last Update : 2020-Nov-03\n * Version : 0.9.2\n * License : MIT License\n**/\n(function ($) {\n  // object that holds all the settings and properties which is externally visible i.e. NOT private\n  var base = {\n    datasource: {\n      data: [],\n      keyfield: null\n    },\n    headers: [],\n    //column definitions\n    pageSize: 25,\n    // current page size\n    currentPageIdx: 0,\n    // current page index - zero based\n    maxPageButtons: 10,\n    // the maximum number of pager buttons to display\n    parentElem: null,\n    // the base HTML element\n    data: loadData,\n    // function reference to set the data\n    rowNumbers: {\n      visible: true,\n      title: \"Row\"\n    },\n    // the row numbers property\n    currentSort: null,\n    // the current field and direction of sorting\n    currentSelection: null,\n    // last clicked row,\n    noDataLabel: \"No Results\",\n    // label to display if there is no data in the grid\n    onRowClick: null // external handler when a row is clicked\n\n  };\n  var sortAscSVG = '<svg width=\"20px\" height=\"20px\" viewBox=\"0 0 16 16\" class=\"bi bi-sort-down\" fill=\"#999999\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M3 2a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-1 0v-10A.5.5 0 0 1 3 2z\"/><path fill-rule=\"evenodd\" d=\"M5.354 10.146a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L3 11.793l1.646-1.647a.5.5 0 0 1 .708 0zM7 9.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 9a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z\"/></svg>';\n  var sortDescSVG = '<svg width=\"20px\" height=\"20px\" viewBox=\"0 0 16 16\" class=\"bi bi-sort-down-alt\" fill=\"#999999\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M3 3a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-1 0v-10A.5.5 0 0 1 3 3z\"/><path fill-rule=\"evenodd\" d=\"M5.354 11.146a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L3 12.793l1.646-1.647a.5.5 0 0 1 .708 0zM7 6.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0-.5.5zm0 3a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 0-1h-5a.5.5 0 0 0-.5.5zm0 3a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5zm0-9a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 0-1h-1a.5.5 0 0 0-.5.5z\"/></svg>';\n  /* iterates the data and fills in the table body\n  data - the array of data to bind\n  keyField - the entity property to use an identifier or key\n  */\n\n  function loadData(data, keyField) {\n    // remove all data records from the table\n    base.parentElem.find(\"tbody > tr\").remove();\n    base.datasource.data = data;\n    base.datasource.keyfield = keyField;\n    var startRow = base.currentPageIdx * base.pageSize + 1; // row we started counting on\n\n    var curRow = startRow; // foreach record of data\n\n    for (var row = startRow - 1; row < (base.currentPageIdx + 1) * base.pageSize && row < data.length; ++row) {\n      // start a new row\n      var rowStr = jQuery('<tr></tr>'); // add a data field to each <tr>\n\n      if (keyField != null) rowStr.data('ray-key', data[row][keyField]); // column to hold row numbers if implemented\n\n      if (base.rowNumbers.visible) {\n        var style = base.rowNumbers.styleClass != null ? \" class='\" + base.rowNumbers.styleClass + \"'\" : \"\";\n        rowStr.append('<td' + style + '>' + (row + 1) + '</td>');\n      } // set the col index if there are row numbers\n\n\n      var col = base.rowNumbers.visible ? 1 : 0; // for each header column\n\n      for (; col < base.headers.length; ++col) {\n        // get this field name\n        var fieldName = base.headers[col].field; // start the td\n\n        var cell = jQuery('<td></td>'); // the render func returns false\n\n        if (base.headers[col].renderIf != null && !base.headers[col].renderIf(data[row])) {\n          cell.append(\"&nbsp;\");\n          rowStr.append(cell);\n          continue;\n        } // foreach icon in the column\n\n\n        if (base.headers[col].icons != null && base.headers[col].icons.length > 0) {\n          // foreach icon listed in the header\n          jQuery.each(base.headers[col].icons, function (idx, ic) {\n            // base span + the class name in the glyph property\n            var colBtn = jQuery(\"<span class='rayicon \" + ic.glyph + \"' aria-hidden='true' />\"); //colBtn.addClass(ic.glyph);\n            // add icon click handler where data contains the row index and object ID\n\n            if (ic.handler != null) cell.on('click', null, {\n              handler: ic.handler,\n              data: {\n                rowIdx: row,\n                id: data[row][keyField]\n              }\n            }, doIconClick); // set a ray-data value as the field or value specified on this column\n\n            if (ic.data != null) colBtn.data('ray-data', data[row][ic.data]);\n            cell.append(colBtn);\n          });\n        } // add cell data\n\n\n        if (fieldName != null) {\n          if (base.headers[col].format != null) cell.append(base.headers[col].format(data[row]));else cell.append(data[row][fieldName]);\n        } // if empty add a space\n\n\n        if (jQuery.trim(cell.html()).length < 1) {\n          cell.append(\"&nbsp;\");\n        }\n\n        rowStr.append(cell);\n      } // add onClick event handler to the row\n\n\n      rowStr.on('click', null, {\n        rowIdx: row,\n        id: data[row][keyField]\n      }, doRowClick); // append the row\n\n      $(base.parentElem).find('table > tbody').append(rowStr);\n      ++curRow;\n    } // update the footer\n\n\n    renderFooter({\n      start: startRow,\n      end: curRow - 1,\n      total: data.length\n    });\n  }\n\n  ;\n  /* sets all the options when the control is created */\n\n  jQuery.fn.raytable = function (options) {\n    // remember the base element\n    base.parentElem = $(this); // test the root tag is either div or table, we want to put a div around a table\n\n    if (base.parentElem.prop(\"tagName\").toLowerCase() != 'div') {\n      alert('Parent element must be a div tag!');\n      return;\n    } // if there are no options, then don't change anything, else merge existing options for the same instance\n    // get the input options\n\n\n    base.datasource.data = options.datasource.data;\n    base.datasource.keyfield = options.datasource.keyfield;\n    if (options.pagesize != null && options.pagesize > 0) base.pageSize = options.pagesize;\n    if (options.maxPageButtons != null && options.maxPageButtons > 0) base.maxPageButtons = options.maxPageButtons;\n    base.rowNumbers = options.rowNumbers;\n    base.onRowClick = options.rowClickHandler; // set the headers\n\n    if (options.columns != null && options.columns.length > 0) {\n      base.headers = options.columns;\n    } else // use the HTML table headers\n      {\n        var ths = base.parentElem.find('thead tr').children(); // create header objects based on the html tags\n\n        for (var j = 0; j < ths.length; ++j) {\n          var field = $(ths[j]).data('ray-field');\n          var title = $(ths[j]).text();\n          base.headers.push({\n            field: field,\n            title: title\n          });\n        }\n      } // add a column to hold row numbers\n\n\n    if (base.rowNumbers.visible) {\n      options.columns.unshift({\n        field: \"rowNum\",\n        title: base.rowNumbers.title\n      });\n    } // render header\n\n\n    renderTable(); // if data has been specified, then go ahead an load it, even empty data will cause this to run\n\n    loadData(base.datasource.data, base.datasource.keyfield); // render footer\n\n    renderFooter(); // returning base exposes it publicly\n\n    return base;\n  }; // creates the skeleton of the table\n\n\n  function renderTable() {\n    // skeleton of the table\n    var skel = jQuery('<table class=\"table table-striped table-bordered\" style=\"margin-bottom:0px;\"><thead><tr></tr></thead><tbody></tbody></table>'); // add each header\n\n    jQuery.each(base.headers, function (idx, h) {\n      var cell = jQuery('<th>' + h.title + '</th>');\n      if (h.width != undefined) cell.css('width', h.width + 'px'); // check for a sortable column\n\n      if (h.sort) {\n        if (h.field != null) cell.data('field', h.field);\n        cell.append('&nbsp;');\n        var sortBtn = jQuery('<span></span>');\n        sortBtn.on('click', null, h.field, doSortCol);\n        sortBtn.append(sortDescSVG);\n        cell.append(sortBtn);\n      } // append the th cell to the tr\n\n\n      skel.find('tr').append(cell);\n    }); // add the table header and body to the parent elem\n\n    base.parentElem.append(skel); // add a place holder for the footer\n\n    base.parentElem.append('<div class=\"container\"><div id=\"raytable-footer\" class=\"row\" style=\"padding:5px;\"><div class=\"col\"><span id=\"raytable-footer-summary\" class=\"float-right;\">0 - 0 of 0 items</span></div></div></div>');\n  } // creates and appends the footer to the bottom of the table\n  // params include { start: startRow, end: endRow, total: dataLength }\n\n\n  function renderFooter(params) {\n    if (!params) return; // clear out the footer\n\n    base.parentElem.find('#raytable-footer').empty(); // when there's no data to display\n\n    if (params.total < 1) {\n      var summary = '<div class=\"col\"><span id=\"raytable-footer-summary\">' + base.noDataLabel + '</span></div>';\n      base.parentElem.find('#raytable-footer').append(summary);\n      return;\n    } // render pagination control\n\n\n    var pager = jQuery('<ul class=\"pagination pagination-sm\" id=\"raytable-footer-pager\" class=\"float-left\" style=\"margin-top:0px;\"></ul>');\n    base.parentElem.find('#raytable-footer').append(jQuery('<div class=\"col\"></div').append(pager)); // there are more items than page size\n\n    if (params.total > base.pageSize) {\n      // never mutate maxPageButtons, should never be less than 2\n      var totalPage = base.maxPageButtons < 2 ? 2 : base.maxPageButtons; // calculate maximum number of pages needed\n\n      var maxPage = Math.ceil(params.total / base.pageSize);\n      if (totalPage > maxPage) totalPage = maxPage; // page button to render first\n\n      var startPage = base.currentPageIdx - Math.floor(totalPage / 2);\n\n      if (startPage < 0) {\n        startPage = 0;\n      }\n\n      if (maxPage - startPage < totalPage) {\n        startPage = maxPage - totalPage;\n      } // append go to first page icon\n\n\n      var first = jQuery('<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data=\"0\" aria-label=\"Previous\">&laquo;</a></li>');\n      first.on(\"click\", changePage);\n      pager.append(first); // declare page\n\n      var page = 0;\n\n      for (page = startPage; page < startPage + totalPage && page * base.pageSize < params.total; ++page) {\n        var li = page == base.currentPageIdx ? jQuery('<li class=\"page-item active\"></li>') : jQuery('<li class=\"page-item\"></li>');\n        var anchor = jQuery('<a class=\"page-link\" href=\"#\" data=\"' + page + '\">' + (page + 1) + '</a>');\n        li.append(anchor);\n        anchor.on(\"click\", changePage);\n        pager.append(li);\n      } // append got to last page icon\n\n\n      var last = jQuery('<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data=\"' + (maxPage - 1) + '\" aria-label=\"Next\">&raquo;</a></li>');\n      last.on(\"click\", changePage);\n      pager.append(last);\n    } // put the summary in a col\n\n\n    var summary = '<div class=\"col\"><span id=\"raytable-footer-summary\" class=\"float-right\" >' + params.start + ' - ' + params.end + ' of ' + params.total + ' items</span></div>';\n    base.parentElem.find('#raytable-footer').append(summary);\n  } // loads a different page of data\n\n\n  function changePage(event) {\n    // get the page from the button element\n    var button = jQuery(event.target);\n    var page = parseInt(button.attr('data')); // validata page bounds\n\n    base.currentPageIdx = page; // reload the data\n\n    loadData(base.datasource.data, base.datasource.keyfield);\n  } // when a glyph icon is clicked\n\n\n  function doIconClick(event) {\n    event.stopPropagation(); // set external handler\n\n    var handler = event.data.handler; // set the current selection\n\n    base.currentSelection = event.data.data; // forward the event\n\n    event.data = event.data.data;\n    handler(event);\n  } // when a row is clicked on\n\n\n  function doRowClick(event) {\n    base.currentSelection = event.data;\n    base.onRowClick(event);\n  } // sorts the bound data\n  // event.data contains the field name sorted on\n\n\n  function doSortCol(event) {\n    // set the current sort info\n    if (base.currentSort == null) {\n      base.currentSort = {\n        field: event.data,\n        direction: 1\n      };\n    } else if (base.currentSort.field != event.data) {\n      base.currentSort = {\n        field: event.data,\n        direction: base.currentSort.direction\n      };\n    } else {\n      base.currentSort = {\n        field: event.data,\n        direction: base.currentSort.direction * -1\n      };\n    } // sort the data itself\n\n\n    base.datasource.data.sort(dynamicSort(event.data)); // reload the date and page back to start\n\n    base.currentPageIdx = 0;\n    loadData(base.datasource.data, base.datasource.keyfield); // toggle the sort direction and change the glyph -> 1=asc, -1=desc\n\n    if (base.currentSort.direction > 0) {\n      base.parentElem.find('thead th span').each(function (idx, elem) {\n        var parent = jQuery(elem).parent();\n        var color = parent.data('field') == event.data ? '#000000' : '#aaaaaa';\n        jQuery(elem).empty();\n        jQuery(elem).append(jQuery(sortDescSVG).attr('fill', color));\n      });\n    } else {\n      base.parentElem.find('thead th span').each(function (idx, elem) {\n        var parent = jQuery(elem).parent();\n        var color = parent.data('field') == event.data ? '#000000' : '#999999';\n        jQuery(elem).empty();\n        jQuery(elem).append(jQuery(sortAscSVG).attr('fill', color));\n      });\n    }\n  } // sort by a specified property, use prefix '-' to reverse the sort direction\n\n\n  function dynamicSort(property) {\n    var sortOrder = base.currentSort.direction;\n    return function (a, b) {\n      var result = a[property] < b[property] ? -1 : a[property] > b[property] ? 1 : 0;\n      return result * sortOrder;\n    };\n  } // internal debug handler\n\n\n  function debug(event) {\n    alert('Debugging');\n  }\n})(jQuery);","map":{"version":3,"sources":["E:/HRMS-Project/ClientApp/src/components/admin/smallComp/plugin/raydreams.js"],"names":["$","base","datasource","data","keyfield","headers","pageSize","currentPageIdx","maxPageButtons","parentElem","loadData","rowNumbers","visible","title","currentSort","currentSelection","noDataLabel","onRowClick","sortAscSVG","sortDescSVG","keyField","find","remove","startRow","curRow","row","length","rowStr","jQuery","style","styleClass","append","col","fieldName","field","cell","renderIf","icons","each","idx","ic","colBtn","glyph","handler","on","rowIdx","id","doIconClick","format","trim","html","doRowClick","renderFooter","start","end","total","fn","raytable","options","prop","toLowerCase","alert","pagesize","rowClickHandler","columns","ths","children","j","text","push","unshift","renderTable","skel","h","width","undefined","css","sort","sortBtn","doSortCol","params","empty","summary","pager","totalPage","maxPage","Math","ceil","startPage","floor","first","changePage","page","li","anchor","last","event","button","target","parseInt","attr","stopPropagation","direction","dynamicSort","elem","parent","color","property","sortOrder","a","b","result","debug"],"mappings":"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","sourcesContent":["/**\n * Ray Tools\n * Copyright (c) 2016-2021 TAG Digital Studios\n * Created : 2016-Feb-18\n * Last Update : 2020-Nov-03\n * Version : 0.9.2\n * License : MIT License\n**/\n\n(function ($) {\n\n\t// object that holds all the settings and properties which is externally visible i.e. NOT private\n\tvar base = {\n\t\tdatasource: { data: [], keyfield: null },\n\t\theaders: [], //column definitions\n\t\tpageSize: 25, // current page size\n\t\tcurrentPageIdx: 0, // current page index - zero based\n\t\tmaxPageButtons: 10, // the maximum number of pager buttons to display\n\t\tparentElem: null, // the base HTML element\n\t\tdata: loadData, // function reference to set the data\n\t\trowNumbers: { visible: true, title: \"Row\"}, // the row numbers property\n\t\tcurrentSort: null, // the current field and direction of sorting\n\t\tcurrentSelection: null, // last clicked row,\n\t\tnoDataLabel: \"No Results\", // label to display if there is no data in the grid\n\t\tonRowClick: null // external handler when a row is clicked\n\t};\n\n\tvar sortAscSVG = '<svg width=\"20px\" height=\"20px\" viewBox=\"0 0 16 16\" class=\"bi bi-sort-down\" fill=\"#999999\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M3 2a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-1 0v-10A.5.5 0 0 1 3 2z\"/><path fill-rule=\"evenodd\" d=\"M5.354 10.146a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L3 11.793l1.646-1.647a.5.5 0 0 1 .708 0zM7 9.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5zm0-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 9a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z\"/></svg>';\n\n\tvar sortDescSVG = '<svg width=\"20px\" height=\"20px\" viewBox=\"0 0 16 16\" class=\"bi bi-sort-down-alt\" fill=\"#999999\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" d=\"M3 3a.5.5 0 0 1 .5.5v10a.5.5 0 0 1-1 0v-10A.5.5 0 0 1 3 3z\"/><path fill-rule=\"evenodd\" d=\"M5.354 11.146a.5.5 0 0 1 0 .708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 0 1 .708-.708L3 12.793l1.646-1.647a.5.5 0 0 1 .708 0zM7 6.5a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 0-1h-3a.5.5 0 0 0-.5.5zm0 3a.5.5 0 0 0 .5.5h5a.5.5 0 0 0 0-1h-5a.5.5 0 0 0-.5.5zm0 3a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5zm0-9a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 0-1h-1a.5.5 0 0 0-.5.5z\"/></svg>';\n\n\t/* iterates the data and fills in the table body\n\tdata - the array of data to bind\n\tkeyField - the entity property to use an identifier or key\n\t*/\n\tfunction loadData(data, keyField) {\n\n\t\t// remove all data records from the table\n\t\tbase.parentElem.find(\"tbody > tr\").remove();\n\t\tbase.datasource.data = data;\n\t\tbase.datasource.keyfield = keyField;\n\n\t\tvar startRow = (base.currentPageIdx * base.pageSize) + 1; // row we started counting on\n\t\tvar curRow = startRow;\n\n\t\t// foreach record of data\n\t\tfor (var row = startRow - 1; row < ( (base.currentPageIdx + 1) * base.pageSize) && row < data.length; ++row)\n\t\t{\n\t\t\t// start a new row\n\t\t\tvar rowStr = jQuery('<tr></tr>');\n\n\t\t\t// add a data field to each <tr>\n\t\t\tif (keyField != null)\n\t\t\t\trowStr.data( 'ray-key', data[row][keyField] );\n\n\t\t\t// column to hold row numbers if implemented\n\t\t\tif (base.rowNumbers.visible) {\n\t\t\t\tvar style = ( base.rowNumbers.styleClass != null ) ? \" class='\"+ base.rowNumbers.styleClass + \"'\" : \"\";\n\t\t\t\trowStr.append('<td' + style + '>' + (row + 1) + '</td>');\n\t\t\t}\n\n\t\t\t// set the col index if there are row numbers\n\t\t\tvar col = (base.rowNumbers.visible) ? 1 : 0;\n\t\t\t\n\t\t\t// for each header column\n\t\t\tfor (; col < base.headers.length; ++col) {\n\t\t\t\t\n\t\t\t\t// get this field name\n\t\t\t\tvar fieldName = base.headers[col].field;\n\n\t\t\t\t// start the td\n\t\t\t\tvar cell = jQuery('<td></td>');\n\t\t\t\t\n\t\t\t\t// the render func returns false\n\t\t\t\tif ( base.headers[col].renderIf != null && !base.headers[col].renderIf(data[row]) )\n\t\t\t\t{\n\t\t\t\t\tcell.append(\"&nbsp;\");\n\t\t\t\t\trowStr.append(cell);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// foreach icon in the column\n\t\t\t\tif (base.headers[col].icons != null && base.headers[col].icons.length > 0)\n\t\t\t\t{\n\t\t\t\t\t// foreach icon listed in the header\n\t\t\t\t\tjQuery.each(base.headers[col].icons, function (idx, ic) {\n\t\t\t\t\t\n\t\t\t\t\t\t// base span + the class name in the glyph property\n\t\t\t\t\t\tvar colBtn = jQuery(\"<span class='rayicon \" + ic.glyph + \"' aria-hidden='true' />\");\n\t\t\t\t\t\t//colBtn.addClass(ic.glyph);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// add icon click handler where data contains the row index and object ID\n\t\t\t\t\t\tif (ic.handler != null)\n\t\t\t\t\t\t\tcell.on('click', null, {handler:ic.handler, data: { rowIdx: row, id: data[row][keyField] } }, doIconClick );\n\n\t\t\t\t\t\t// set a ray-data value as the field or value specified on this column\n\t\t\t\t\t\tif (ic.data != null)\n\t\t\t\t\t\t\tcolBtn.data('ray-data', data[row][ic.data]);\n\n\t\t\t\t\t\tcell.append(colBtn);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// add cell data\n\t\t\t\tif (fieldName != null)\n\t\t\t\t{\n\t\t\t\t\tif ( base.headers[col].format != null )\n\t\t\t\t\t\tcell.append( base.headers[col].format( data[row] ) );\n\t\t\t\t\telse\n\t\t\t\t\t\tcell.append(data[row][fieldName]);\n\t\t\t\t}\n\n\t\t\t\t// if empty add a space\n\t\t\t\tif ( jQuery.trim(cell.html()).length < 1 ) {\n\t\t\t\t\tcell.append(\"&nbsp;\");\n\t\t\t\t}\n\n\t\t\t\trowStr.append(cell);\n\t\t\t}\n\n\t\t\t// add onClick event handler to the row\n\t\t\trowStr.on('click', null, { rowIdx: row, id: data[row][keyField] }, doRowClick );\n\n\t\t\t// append the row\n\t\t\t$(base.parentElem).find('table > tbody').append(rowStr);\n\n\t\t\t++curRow;\n\t\t}\n\n\t\t// update the footer\n\t\trenderFooter({ start: startRow, end: curRow - 1, total: data.length });\n\t};\n\n\t/* sets all the options when the control is created */\n\tjQuery.fn.raytable = function (options) {\n\t\n\t\t// remember the base element\n\t\tbase.parentElem = $(this);\n\n\t\t// test the root tag is either div or table, we want to put a div around a table\n\t\tif (base.parentElem.prop(\"tagName\").toLowerCase() != 'div') {\n\t\t\talert('Parent element must be a div tag!');\n\t\t\treturn;\n\t\t}\n\n\t\t// if there are no options, then don't change anything, else merge existing options for the same instance\n\n\t\t// get the input options\n\t\tbase.datasource.data = options.datasource.data;\n\t\tbase.datasource.keyfield = options.datasource.keyfield;\n\t\t\n\t\tif (options.pagesize != null && options.pagesize > 0)\n\t\t\tbase.pageSize = options.pagesize;\n\t\t\t\n\t\tif (options.maxPageButtons != null && options.maxPageButtons > 0)\n\t\t\tbase.maxPageButtons = options.maxPageButtons;\n\t\t\t\n\t\tbase.rowNumbers = options.rowNumbers;\n\t\tbase.onRowClick = options.rowClickHandler;\n\n\t\t// set the headers\n\t\tif (options.columns != null && options.columns.length > 0) {\n\t\t\tbase.headers = options.columns;\n\t\t}\n\t\telse // use the HTML table headers\n\t\t{\n\t\t\tvar ths = base.parentElem.find('thead tr').children();\n\n\t\t\t// create header objects based on the html tags\n\t\t\tfor (var j = 0; j < ths.length; ++j) {\n\t\t\t\tvar field = $(ths[j]).data('ray-field');\n\t\t\t\tvar title = $(ths[j]).text();\n\t\t\t\tbase.headers.push({ field: field, title: title });\n\t\t\t}\n\t\t}\n\n\t\t// add a column to hold row numbers\n\t\tif (base.rowNumbers.visible) {\n\t\t\toptions.columns.unshift({ field: \"rowNum\", title: base.rowNumbers.title });\n\t\t}\n\n\t\t// render header\n\t\trenderTable();\n\n\t\t// if data has been specified, then go ahead an load it, even empty data will cause this to run\n\t\tloadData(base.datasource.data, base.datasource.keyfield);\n\n\t\t// render footer\n\t\trenderFooter();\n\n\t\t// returning base exposes it publicly\n\t\treturn base;\n\t};\n\n\t// creates the skeleton of the table\n\tfunction renderTable() {\n\n\t\t// skeleton of the table\n\t\tvar skel = jQuery('<table class=\"table table-striped table-bordered\" style=\"margin-bottom:0px;\"><thead><tr></tr></thead><tbody></tbody></table>');\n\n\t\t// add each header\n\t\tjQuery.each(base.headers, function (idx, h) {\n\n\t\t\tvar cell = jQuery('<th>' + h.title + '</th>');\n\n\t\t\tif (h.width != undefined)\n\t\t\t\tcell.css('width', h.width+'px');\n\n\t\t\t// check for a sortable column\n\t\t\tif (h.sort)\n\t\t\t{\n\t\t\t\tif ( h.field != null )\n\t\t\t\t\tcell.data('field', h.field);\n\n\t\t\t\tcell.append('&nbsp;');\n\t\t\t\tvar sortBtn = jQuery('<span></span>');\n\t\t\t\tsortBtn.on('click', null, h.field, doSortCol);\n\t\t\t\tsortBtn.append(sortDescSVG)\n\t\t\t\tcell.append(sortBtn);\n\t\t\t}\n\t\t\t\n\t\t\t// append the th cell to the tr\n\t\t\tskel.find('tr').append(cell);\n\t\t});\n\n\t\t// add the table header and body to the parent elem\n\t\tbase.parentElem.append(skel);\n\n\t\t// add a place holder for the footer\n\t\tbase.parentElem.append('<div class=\"container\"><div id=\"raytable-footer\" class=\"row\" style=\"padding:5px;\"><div class=\"col\"><span id=\"raytable-footer-summary\" class=\"float-right;\">0 - 0 of 0 items</span></div></div></div>');\n\t}\n\n\t// creates and appends the footer to the bottom of the table\n\t// params include { start: startRow, end: endRow, total: dataLength }\n\tfunction renderFooter(params) {\n\t\tif (!params)\n\t\t\treturn;\n\n\t\t// clear out the footer\n\t\tbase.parentElem.find('#raytable-footer').empty();\n\t\t\n\t\t// when there's no data to display\n\t\tif ( params.total < 1)\n\t\t{\n\t\t\tvar summary = '<div class=\"col\"><span id=\"raytable-footer-summary\">' + base.noDataLabel + '</span></div>';\n\t\t\tbase.parentElem.find('#raytable-footer').append(summary);\n\t\t\treturn;\n\t\t}\n\n\t\t// render pagination control\n\t\tvar pager = jQuery('<ul class=\"pagination pagination-sm\" id=\"raytable-footer-pager\" class=\"float-left\" style=\"margin-top:0px;\"></ul>');\n\t\tbase.parentElem.find('#raytable-footer').append( jQuery('<div class=\"col\"></div' ).append( pager) );\n\n\t\t// there are more items than page size\n\t\tif ( params.total > base.pageSize )\n\t\t{\n\t\t\t// never mutate maxPageButtons, should never be less than 2\n\t\t\tvar totalPage = ( base.maxPageButtons < 2 ) ? 2 : base.maxPageButtons;\n\t\t\n\t\t\t// calculate maximum number of pages needed\n\t\t\tvar maxPage = Math.ceil(params.total / base.pageSize);\n\t\t\n\t\t\tif ( totalPage > maxPage )\n\t\t\t\ttotalPage = maxPage;\n\n\t\t\t// page button to render first\n\t\t\tvar startPage = base.currentPageIdx - Math.floor(totalPage / 2);\n\t\t\t\n\t\t\tif (startPage < 0)\n\t\t\t{ startPage = 0; }\n\t\t\t\n\t\t\tif ( maxPage - startPage < totalPage )\n\t\t\t{ startPage = maxPage - totalPage; }\n\t\t\t\n\t\t\t// append go to first page icon\n\t\t\tvar first = jQuery('<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data=\"0\" aria-label=\"Previous\">&laquo;</a></li>');\n\t\t\tfirst.on(\"click\", changePage);\n\t\t\tpager.append(first);\n\t\t\t\n\t\t\t// declare page\n\t\t\tvar page = 0;\n\t\t\t\n\t\t\tfor (page = startPage; page < startPage + totalPage && page * base.pageSize < params.total ; ++page)\n\t\t\t{\n\t\t\t\tvar li = (page == base.currentPageIdx) ? jQuery('<li class=\"page-item active\"></li>') : jQuery('<li class=\"page-item\"></li>');\n\t\t\t\tvar anchor = jQuery('<a class=\"page-link\" href=\"#\" data=\"' + page + '\">' + (page + 1) + '</a>');\n\t\t\t\tli.append(anchor);\n\t\t\t\tanchor.on(\"click\", changePage);\n\t\t\t\tpager.append(li);\n\t\t\t}\n\t\t\t\n\t\t\t// append got to last page icon\n\t\t\tvar last = jQuery('<li class=\"page-item\"><a class=\"page-link\" href=\"#\" data=\"' + (maxPage-1) + '\" aria-label=\"Next\">&raquo;</a></li>');\n\t\t\tlast.on(\"click\", changePage);\n\t\t\tpager.append(last);\n\t\t}\n\n\t\t// put the summary in a col\n\t\tvar summary = '<div class=\"col\"><span id=\"raytable-footer-summary\" class=\"float-right\" >' + params.start + ' - ' + params.end + ' of ' + params.total + ' items</span></div>';\n\t\tbase.parentElem.find('#raytable-footer').append(summary);\n\t}\n\n\t// loads a different page of data\n\tfunction changePage(event) {\n\t\t// get the page from the button element\n\t\tvar button = jQuery(event.target);\n\t\tvar page = parseInt(button.attr('data'));\n\n\t\t// validata page bounds\n\t\tbase.currentPageIdx = page;\n\n\t\t// reload the data\n\t\tloadData(base.datasource.data, base.datasource.keyfield);\n\t}\n\t\n\t// when a glyph icon is clicked\n\tfunction doIconClick(event) {\n\t\tevent.stopPropagation();\n\t\t\n\t\t// set external handler\n\t\tvar handler = event.data.handler;\n\t\t\n\t\t// set the current selection\n\t\tbase.currentSelection = event.data.data;\n\t\t\n\t\t// forward the event\n\t\tevent.data = event.data.data;\n\t\thandler(event);\n\t}\n\t\n\t// when a row is clicked on\n\tfunction doRowClick(event) {\n\t\tbase.currentSelection = event.data;\n\t\tbase.onRowClick(event);\n\t}\n\n\t// sorts the bound data\n\t// event.data contains the field name sorted on\n\tfunction doSortCol(event) {\n\t\t// set the current sort info\n\t\tif (base.currentSort == null)\n\t\t{\n\t\t\tbase.currentSort = { field: event.data, direction: 1 };\n\t\t}\n\t\telse if (base.currentSort.field != event.data)\n\t\t{\n\t\t\tbase.currentSort = { field: event.data, direction: base.currentSort.direction };\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbase.currentSort = { field: event.data, direction: base.currentSort.direction * -1 };\n\t\t}\n\n\t\t// sort the data itself\n\t\tbase.datasource.data.sort( dynamicSort(event.data) );\n\n\t\t// reload the date and page back to start\n\t\tbase.currentPageIdx = 0;\n\t\tloadData(base.datasource.data, base.datasource.keyfield);\n\n\t\t// toggle the sort direction and change the glyph -> 1=asc, -1=desc\n\t\tif (base.currentSort.direction > 0)\n\t\t{\n\t\t\tbase.parentElem.find('thead th span').each(\n\t\t\t\tfunction (idx, elem) {\n\t\t\t\t\tvar parent = jQuery(elem).parent();\n\t\t\t\t\tvar color = (parent.data('field') == event.data ) ? '#000000' : '#aaaaaa';\n\t\t\t\t\tjQuery(elem).empty();\n\t\t\t\t\tjQuery(elem).append( jQuery(sortDescSVG).attr('fill', color) );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbase.parentElem.find('thead th span').each(\n\t\t\t\tfunction (idx, elem) {\n\t\t\t\t\tvar parent = jQuery(elem).parent();\n\t\t\t\t\tvar color = (parent.data('field') == event.data ) ? '#000000' : '#999999';\n\t\t\t\t\tjQuery(elem).empty();\n\t\t\t\t\tjQuery(elem).append( jQuery(sortAscSVG).attr('fill', color) );\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t}\n\n\t// sort by a specified property, use prefix '-' to reverse the sort direction\n\tfunction dynamicSort(property) {\n\t\tvar sortOrder = base.currentSort.direction;\n\n\t\treturn function (a, b) {\n\t\t\tvar result = (a[property] < b[property]) ? -1 : (a[property] > b[property]) ? 1 : 0;\n\t\t\treturn result * sortOrder;\n\t\t}\n\t}\n\n\t// internal debug handler\n\tfunction debug(event) {\n\t\talert('Debugging');\n\t}\n\n}(jQuery));\n"]},"metadata":{},"sourceType":"module"}